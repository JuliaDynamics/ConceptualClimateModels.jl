<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Cloud Topped Mixed Layer Model · ConceptualClimateModels.jl</title><meta name="title" content="Cloud Topped Mixed Layer Model · ConceptualClimateModels.jl"/><meta property="og:title" content="Cloud Topped Mixed Layer Model · ConceptualClimateModels.jl"/><meta property="twitter:title" content="Cloud Topped Mixed Layer Model · ConceptualClimateModels.jl"/><meta name="description" content="Documentation for ConceptualClimateModels.jl."/><meta property="og:description" content="Documentation for ConceptualClimateModels.jl."/><meta property="twitter:description" content="Documentation for ConceptualClimateModels.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="https://fonts.googleapis.com/css?family=Montserrat|Source+Code+Pro&amp;display=swap" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ConceptualClimateModels.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../tutorial/">Tutorial</a></li><li><span class="tocitem">Submodules</span><ul><li><a class="tocitem" href="../globalmeanebm/">Global mean EBM</a></li><li class="is-active"><a class="tocitem" href>Cloud Topped Mixed Layer Model</a><ul class="internal"><li><a class="tocitem" href="#Mixed-layer"><span>Mixed layer</span></a></li><li><a class="tocitem" href="#Clouds-and-decoupling"><span>Clouds and decoupling</span></a></li><li><a class="tocitem" href="#Radiation"><span>Radiation</span></a></li><li><a class="tocitem" href="#Free-troposphere"><span>Free troposphere</span></a></li><li><a class="tocitem" href="#Default-processes"><span>Default processes</span></a></li></ul></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/globalmeanebm/">Global mean EBM</a></li><li><a class="tocitem" href="../../examples/ctmlm/">Cloud Topped Mixed Layer Model</a></li></ul></li><li><a class="tocitem" href="../../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Submodules</a></li><li class="is-active"><a href>Cloud Topped Mixed Layer Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Cloud Topped Mixed Layer Model</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/main/docs/src/submodules/ctmlm.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ctmlm_docs"><a class="docs-heading-anchor" href="#ctmlm_docs">CloudToppedMixedLayerModel</a><a id="ctmlm_docs-1"></a><a class="docs-heading-anchor-permalink" href="#ctmlm_docs" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel" href="#ConceptualClimateModels.CloudToppedMixedLayerModel"><code>ConceptualClimateModels.CloudToppedMixedLayerModel</code></a> — <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CloudToppedMixedLayerModel</code></pre><p>Submodule providing processes about cloud topped mixed layer models (MLMs). This combines existing equations on MLM by (<a href="../../references/#Stevens2006">Stevens, 2006</a>) and (<a href="../../references/#Bretherton1997">Bretherton and Wyant, 1997</a>), with surface energy balance and dynamic cloud equations. It is developed as part of the research article (<a href="../../references/#Datseris2025">Datseris, 2025</a>). If you use this submodule, please cite the paper.</p><p>The organization is as follows:</p><ul><li>All important variables and parameters (participate in many processes) are defined in the module file and as module-level scoped variables (global variables). Click the &quot;source&quot; of this docstring to access the module file.</li><li>All processes (physical equations) are defined in their respective files such as <code>free_troposhere.jl</code>, etc. Docstrings of important processes are expanded in the docs here. You will notice that all functions that return processes (equations) utilize these global variables and global parameters. Many of these functions will also define local variables and parameters. All noteworthy processes have docstrings that are expanded in the submodule online documentation. However, the majority of docstrings do not actually list the equations themselves. Simply click the &quot;source code&quot; button on the bottom right of each docstring to go to the source code. Because this package is written in Julia, and because it uses symbolic expressions throughout, reading the source code is truly as straight forward as reading Latex-rendered equations.</li><li>The <code>default.jl</code> file defines default processes for many global variables. These are also expanded in the docs.</li></ul><p>Throughout the submodule time is in units of days, specific humidity is in units of g/kg, liquid water static energy is in units of K (i.e., normalized by cₚ), height in meters, temperature in K, and all energy quantities are in W/m².</p><p>To learn how to use this submodule visit first the general tutorial of ConceptualClimateModels.jl and then the dedicated example on a cloudy mixed layer model. The module purposefully does not export any names, so the recommended way to use it is by an alias: <code>import ConceptualClimateModels.CloudToppedMixedLayerModel as CTMLM</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/CloudToppedMixedLayerModel.jl#L1-L38">source</a></section></article><h2 id="Mixed-layer"><a class="docs-heading-anchor" href="#Mixed-layer">Mixed layer</a><a id="Mixed-layer-1"></a><a class="docs-heading-anchor-permalink" href="#Mixed-layer" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_dynamic" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_dynamic"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_dynamic</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mlm_dynamic()</code></pre><p>Provide equations 1-3 in (<a href="../../references/#Datseris2025">Datseris, 2025</a>) (or, 31-33 in (<a href="../../references/#Stevens2006">Stevens, 2006</a>)) defining the bulk boundary layer dynamics. An additional auxilary velocity <span>$-w_m$</span> is added in the equation for <span>$z_b$</span> and two auxilary export terms <span>$q_x, s_x$</span> are added to the equations for <span>$q_b, s_b$</span>. All these auxilarity terms are 0 by default (otherwise, assign a process to them).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/bbl.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.bbl_stevens2006_steadystate" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.bbl_stevens2006_steadystate"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.bbl_stevens2006_steadystate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">bbl_stevens2006_steadystate(fixed; z_b, q_b, s_b, CLT)</code></pre><p>Return the equations 35-38 in (<a href="../../references/#Stevens2006">Stevens, 2006</a>) describing the analytically solved steady state of the MLM. These equations could be coupled to other parts of module but we have a problem of circular dependency for the steady state of <span>$z_b$</span>. If we attempt to couple them with the dynamic equations for <span>$C$</span>, then the following:</p><pre><code class="nohighlight hljs">z_b ~ h⃰ * (e_e*σ_38)/(1 + σ_38 - e_e),
σ_38 ~ V*Δs*cₚ/(ΔF/ρ₀),</code></pre><p>yields a circular dependency: <code>z_b</code> depends on <code>σ_38</code> which depends on <code>ΔF</code> which depends on <code>T_t</code> which depends on <code>z_b</code>. To resolve this a <code>fixed</code> option is given, which can be any of: <code>ΔF, z_b, w_s, T_t</code>. This quantity is set fixed and becomes a parameter so that the equation for <code>z_b</code> is closed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/bbl.jl#L49-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.temperature_exact" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.temperature_exact"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.temperature_exact</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">temperature_exact(z, s, q)</code></pre><p>Use root-finding to find the temperature at height <code>z</code> given the liquid water static energy and total specific humidity, as described by (<a href="../../references/#Stevens2006">Stevens, 2006</a>). This is the default equation used for <code>T_t ~ temperature_exact(z_b, s_b, q_b)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/bbl.jl#L107-L114">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.entrainment_velocity" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.entrainment_velocity"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.entrainment_velocity</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">entrainment_velocity(version = :Stevens2006; use_augmentation = true)</code></pre><p>Return an equation for the entrainment velocity <span>$w_e$</span>. Versions are <code>:Stevens2006, :Gesso2014, :LL96</code>. Keyword <code>use_augmentation</code> adds the decoupling-based augmentation described in (<a href="../../references/#Datseris2025">Datseris, 2025</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/bbl.jl#L136-L142">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.q_liquid" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.q_liquid"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.q_liquid</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">q_liquid(T, q, z)</code></pre><p>liquid specific humidity given temperature total water specific humidity and height. 0.0 if below saturation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/bbl.jl#L206-L211">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.q_saturation" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.q_saturation"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.q_saturation</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">q_saturation(T, z)</code></pre><p>Saturation specific humidity given temperature and height. Height is transformed to pressure via hydrostatic approximation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/bbl.jl#L220-L225">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.pressure" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.pressure"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.pressure</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">pressure(z, T)</code></pre><p>Use hydrostatic balance and ideal gas law to get pressure at height z given temperature at height z. The equation is often called the &quot;Hypsometric equation&quot; with the factor (Rd<em>T/g) called the scale height. Note that normally using Rd requires usage of Tv (virtual temperature), defined as Tv = T</em>(1 + 0.608*q) with q the specific humidity of water vapor. In the codebase we practically always approximate Tv by T.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/bbl.jl#L254-L263">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.sst_dynamic" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.sst_dynamic"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.sst_dynamic</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Return τSST * d(SST)/dt = ASW - Lnet - LHF - SHF + SST_X .</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/default.jl#L1">source</a></section></article><h2 id="Clouds-and-decoupling"><a class="docs-heading-anchor" href="#Clouds-and-decoupling">Clouds and decoupling</a><a id="Clouds-and-decoupling-1"></a><a class="docs-heading-anchor-permalink" href="#Clouds-and-decoupling" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.cf_dynamic" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.cf_dynamic"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.cf_dynamic</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cf_dynamic()</code></pre><p>Provide the equations <span>$\tau_C dC/dt = C_\mathcal{D} - C$</span> as well as the equation that defines <span>$C_\mathcal{D}$</span> as a function of the decoupling variable <span>$\mathcal{D}$</span>. The function uses the curve fitted to data in (<a href="../../references/#Datseris2025">Datseris, 2025</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/clouds.jl#L1-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_emission_temperature" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_emission_temperature"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_emission_temperature</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cloud_emission_temperature(version = :mean)</code></pre><p>Return a process for <span>$T_C$</span>. Versions are <code>:top, :base, :mean</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/clouds.jl#L46-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_emissivity" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_emissivity"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_emissivity</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cloud_emissivity(version = 1.0; fraction = true)</code></pre><p>Provide an equation for the effective emissivity of the cloud layer. Options for <code>version</code>:</p><ul><li><code>:clt</code>: inspired by (<a href="../../references/#RandalSuarez1984">Randall and Suarez, 1984</a>), emissivity scales with the depth of the cloud layer.</li><li><code>:liquid_water_path</code>: Exponential of LWP.</li><li><code>&lt;: Number</code>: emissiviy is just the provided number or symbolic expression.</li></ul><p>If <code>fraction = true</code> the emissivity is further multiplied by the cloud fraction.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/clouds.jl#L61-L73">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_layer_thickness" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_layer_thickness"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_layer_thickness</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cloud_layer_thickness(version = :exact)</code></pre><p>Provide an equation for the relative/normalized cloud layer thickness CLT. The options for version are:</p><ul><li><code>:exact</code>: exact estimation by figuring out when <code>q_liquid</code> first becomes positive. Computationally costly as it requires interpolations.</li><li><code>:Bolton1980</code>: Well known approximate expression by Bolton, 1980.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/clouds.jl#L133-L141">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.decoupling_variable" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.decoupling_variable"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.decoupling_variable</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">decoupling_variable(version = :Bretherton1997)</code></pre><p>Return an equation for <span>$\mathcal{D}$</span>, the decoupling variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/decoupling.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.decoupling_ratios" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.decoupling_ratios"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.decoupling_ratios</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">decoupling_ratios()</code></pre><p>Return equations for <span>$\mathcal{d}_q, \mathcal{d}_s$</span> as in (<a href="../../references/#Datseris2025">Datseris, 2025</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/decoupling.jl#L16-L20">source</a></section></article><h2 id="Radiation"><a class="docs-heading-anchor" href="#Radiation">Radiation</a><a id="Radiation-1"></a><a class="docs-heading-anchor-permalink" href="#Radiation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_shortwave_warming" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_shortwave_warming"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_shortwave_warming</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cloud_shortwave_warming()</code></pre><p>Provide an equation for CTRC_sw which by default is <code>0.04*C*S</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/radiation.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_longwave_cooling" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_longwave_cooling"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.cloud_longwave_cooling</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cloud_longwave_cooling()</code></pre><p>Provide an equation for CTRC_lw.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/radiation.jl#L35-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_radiative_cooling" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_radiative_cooling"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_radiative_cooling</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mlm_radiative_cooling(version = :three_layer)</code></pre><p>Provide an equation for <span>$\Delta F_s$</span>, the radiative cooling of the boundary layer (assumming <span>$\Delta F_q = 0$</span>). Versions are: <code>:three_layer, :ctrc, :Gesso2014</code> as in (<a href="../../references/#Datseris2025">Datseris, 2025</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/radiation.jl#L55-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.downwards_longwave_radiation" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.downwards_longwave_radiation"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.downwards_longwave_radiation</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">downwards_longwave_radiation([version])</code></pre><p>Provide equation for <span>$L_d, L_{net}$</span>, the incoming longwave radiation or the net longwave radiative cooling of the surface. See the source code for possible versions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/radiation.jl#L98-L104">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.albedo" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.albedo"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.albedo</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Return an equation for <code>α</code> the total albedo perceived by the surface.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/radiation.jl#L170">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.matsunobu_emissivity" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.matsunobu_emissivity"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.matsunobu_emissivity</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">matsunobu_emissivity(RH, T, H = 0)</code></pre><p>Return emissivity at given relative humidity and temperature as defined by (<a href="../../references/#Matsunobu2024">Matsunobu and Coimbra, 2024</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/radiation.jl#L137-L141">source</a></section></article><h2 id="Free-troposphere"><a class="docs-heading-anchor" href="#Free-troposphere">Free troposphere</a><a id="Free-troposphere-1"></a><a class="docs-heading-anchor-permalink" href="#Free-troposphere" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.free_troposphere_emission_temperature" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.free_troposphere_emission_temperature"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.free_troposphere_emission_temperature</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">free_troposphere_emission_temperature(γ = 1.0; add_co2 = true)</code></pre><p>Return an equation for <span>$T_{FTR}$</span>. <code>γ</code> is as in (<a href="../../references/#Datseris2025">Datseris, 2025</a>). <code>add_co2</code> will add an additional warming term <code>ECS_CO2*log2(CO2/400)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/free_troposphere.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_s₊" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_s₊"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_s₊</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mlm_s₊(
    version = :difference;
    cloud_effect = false,
    CO2_effect = false,
)</code></pre><p>Provide equation for <span>$s_+$</span>. To do this, a boundary condition must be provided that is a fixed parameter. <code>version</code> argument decides this:</p><ul><li><code>:difference</code>: the starting temperature difference across inversion is a fixed parameter.</li><li><code>:temperature</code>: the starting temperature after the inversion is a fixed parameter.</li><li><code>:static_energy</code>: the starting moist static energy after the inversion is a fixed parameter.</li></ul><p>Besides these, we can also specify whether CO2 increase also increases temperature difference, and whether decreasing <span>$C$</span> decreases temperature difference due to cloud thinning as in (<a href="../../references/#Singer2023a">Singer and Schneider, apr 2023</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/free_troposphere.jl#L37-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_q₊" href="#ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_q₊"><code>ConceptualClimateModels.CloudToppedMixedLayerModel.mlm_q₊</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mlm_q₊(version = :relative)</code></pre><p>Provide equation for <span>$q_+$</span>. If <code>version = :relative</code> then make free tropospheric relative humidity a free parameter. Else if <code>version = :constant</code> then make <span>$q_+$</span> itself a parameter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/79780c37cddd2e28d439e14caee4fde575d4d782/src/CloudToppedMixedLayerModel/free_troposphere.jl#L102-L108">source</a></section></article><h2 id="Default-processes"><a class="docs-heading-anchor" href="#Default-processes">Default processes</a><a id="Default-processes-1"></a><a class="docs-heading-anchor-permalink" href="#Default-processes" title="Permalink"></a></h2><pre><code class="language-julia hljs">using ConceptualClimateModels
import ConceptualClimateModels.CloudToppedMixedLayerModel as CTMLM
default_processes_eqs(CTMLM)</code></pre><p class="math-container">\[ \begin{align}
S\left( t \right) &amp;= \mathtt{S\_0} \\
\mathtt{\rho_0}\left( t \right) &amp;= \frac{1.0178 \cdot 10^{5}}{287 \mathtt{SST}\left( t \right)} \\
\mathtt{q\_x}\left( t \right) &amp;= 0 \\
\mathtt{L_0}\left( t \right) &amp;= 5.6704 \cdot 10^{-8} \left( \mathtt{SST}\left( t \right) \right)^{4} \\
\mathtt{L\_b}\left( t \right) &amp;= 5.6704 \cdot 10^{-8} \left( \mathtt{T\_b}\left( t \right) \right)^{4} \mathtt{\varepsilon\_b}\left( t \right) \\
\mathtt{T\_t}\left( t \right) &amp;= temperature\_exact\left( \mathtt{z\_b}\left( t \right), \mathtt{s\_b}\left( t \right), \mathtt{q\_b}\left( t \right) \right) \\
\mathtt{\Delta.s}\left( t \right) &amp;=  - \mathtt{s\_b}\left( t \right) + \mathtt{s.}\left( t \right) \\
\mathtt{s\_x}\left( t \right) &amp;= 0 \\
\mathtt{s_0}\left( t \right) &amp;= \mathtt{SST}\left( t \right) \\
\mathtt{\Delta_{0}q}\left( t \right) &amp;= \mathtt{q\_b}\left( t \right) - \mathtt{q_0}\left( t \right) \\
\mathtt{L\_c}\left( t \right) &amp;= 5.6704 \cdot 10^{-8} \left( \mathtt{T\_c}\left( t \right) \right)^{4} \mathtt{\varepsilon\_c}\left( t \right) \\
\alpha\left( t \right) &amp;= 1 - \left( 1 - C\left( t \right) \mathtt{\alpha\_C} \right) \left( 1 - \mathtt{\alpha\_a} \right) \left( 1 - \mathtt{\alpha\_s} \right) \\
\zeta\left( t \right) &amp;= 0 \\
\mathtt{RH\_b}\left( t \right) &amp;= \frac{\mathtt{q\_b}\left( t \right)}{\mathtt{q_0}\left( t \right)} \\
V\left( t \right) &amp;= U \mathtt{c\_d} \\
\mathtt{LHF}\left( t \right) &amp;=  - 2530 \mathtt{\Delta_{0}q}\left( t \right) V\left( t \right) \mathtt{\rho_0}\left( t \right) \\
\mathtt{w\_v}\left( t \right) &amp;= 0 \\
\mathtt{\varepsilon\_FTR}\left( t \right) &amp;= clamp\left( 0.62 + 1.642 \sqrt{0.0060026 \mathtt{RH.} e^{\frac{17.625 \left( -273.15 + \mathtt{T\_FTR}\left( t \right) \right)}{-30.11 + \mathtt{T\_FTR}\left( t \right)}}}, 0, 1 \right) \\
\mathtt{T\_c}\left( t \right) &amp;= \frac{1}{2} \left( \mathtt{T\_t}\left( t \right) + \mathtt{T\_lcl}\left( t \right) \right) \\
\mathtt{w\_m}\left( t \right) &amp;= 0 \\
\mathtt{CTRC}\left( t \right) &amp;= \mathtt{CTRClw}\left( t \right) - \mathtt{CRCsw}\left( t \right) \\
\mathtt{T\_b}\left( t \right) &amp;= \left( 1 - \mathtt{h\_b} \right) \mathtt{s\_b}\left( t \right) + \mathtt{h\_b} \mathtt{T\_lcl}\left( t \right) \\
\mathtt{\Delta.q}\left( t \right) &amp;=  - \mathtt{q\_b}\left( t \right) + \mathtt{q.}\left( t \right) \\
\mathtt{CRC}\left( t \right) &amp;= \mathtt{CRClw}\left( t \right) - \mathtt{CRCsw}\left( t \right) \\
\mathtt{ASW}\left( t \right) &amp;=  - \mathtt{CRCsw}\left( t \right) + S\left( t \right) \left( 1 - \alpha\left( t \right) \right) \\
\mathtt{\varepsilon\_b}\left( t \right) &amp;= clamp\left( 0.62 + 1.642 \sqrt{0.0060026 e^{\frac{17.625 \left( -273.15 + \mathtt{T\_b}\left( t \right) \right)}{-30.11 + \mathtt{T\_b}\left( t \right)}} \mathtt{RH\_b}\left( t \right)}, 0, 1 \right) \\
\mathtt{q_0}\left( t \right) &amp;= \frac{3.8025 \cdot 10^{5} e^{ - 5488.1 \left( -0.0036609 + \frac{1}{\mathtt{SST}\left( t \right)} \right)}}{1.0178 \cdot 10^{5} - 610.78 e^{ - 5488.1 \left( -0.0036609 + \frac{1}{\mathtt{SST}\left( t \right)} \right)}} \\
\mathtt{Lnet}\left( t \right) &amp;= \mathtt{L_0}\left( t \right) - \mathtt{Ld}\left( t \right) \\
\mathtt{LWP}\left( t \right) &amp;= liquid\_water\_path\left( \mathtt{T\_t}\left( t \right), \mathtt{CLT}\left( t \right), \mathtt{z\_b}\left( t \right), \mathtt{s\_b}\left( t \right), \mathtt{q\_b}\left( t \right) \right) \\
\mathtt{SHF}\left( t \right) &amp;=  - 1004 V\left( t \right) \mathtt{\rho_0}\left( t \right) \mathtt{\Delta_{0}s}\left( t \right) \\
\mathtt{\mathscr{d}\_q}\left( t \right) &amp;= 0 \\
\mathtt{\mathscr{d}\_s}\left( t \right) &amp;= 0 \\
\mathtt{SST\_X}\left( t \right) &amp;= \mathtt{SST\_X\_0} \\
\mathtt{\Delta_{0}s}\left( t \right) &amp;= \mathtt{s\_b}\left( t \right) - \mathtt{s_0}\left( t \right) \\
\mathtt{T\_lcl}\left( t \right) &amp;= \mathtt{s\_b}\left( t \right) - 0.009761 \mathtt{CLT}\left( t \right) \mathtt{z\_b}\left( t \right) \\
\mathtt{L\_FTR}\left( t \right) &amp;= 5.6704 \cdot 10^{-8} \left( \mathtt{T\_FTR}\left( t \right) \right)^{4} \mathtt{\varepsilon\_FTR}\left( t \right)
\end{align}
 \]</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../globalmeanebm/">« Global mean EBM</a><a class="docs-footer-nextpage" href="../../examples/globalmeanebm/">Global mean EBM »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.9.0 on <span class="colophon-date" title="Thursday 27 March 2025 14:45">Thursday 27 March 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
