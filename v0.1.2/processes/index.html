<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Predefined processes · ConceptualClimateModels.jl</title><meta name="title" content="Predefined processes · ConceptualClimateModels.jl"/><meta property="og:title" content="Predefined processes · ConceptualClimateModels.jl"/><meta property="twitter:title" content="Predefined processes · ConceptualClimateModels.jl"/><meta name="description" content="Documentation for ConceptualClimateModels.jl."/><meta property="og:description" content="Documentation for ConceptualClimateModels.jl."/><meta property="twitter:description" content="Documentation for ConceptualClimateModels.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="https://fonts.googleapis.com/css?family=Montserrat|Source+Code+Pro&amp;display=swap" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ConceptualClimateModels.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li class="is-active"><a class="tocitem" href>Predefined processes</a><ul class="internal"><li><a class="tocitem" href="#Temperature"><span>Temperature</span></a></li><li><a class="tocitem" href="#Temperature-difference"><span>Temperature difference</span></a></li><li><a class="tocitem" href="#Longwave-radiation"><span>Longwave radiation</span></a></li><li><a class="tocitem" href="#Shortwave-radiation"><span>Shortwave radiation</span></a></li><li><a class="tocitem" href="#Ice/snow"><span>Ice/snow</span></a></li><li><a class="tocitem" href="#Water-vapor"><span>Water vapor</span></a></li><li><a class="tocitem" href="#Insolation"><span>Insolation</span></a></li><li><a class="tocitem" href="#Forcings"><span>Forcings</span></a></li><li><a class="tocitem" href="#Clouds"><span>Clouds</span></a></li><li><a class="tocitem" href="#generic_processes"><span>Generic processes</span></a></li><li><a class="tocitem" href="#default_processes"><span>Default processes</span></a></li></ul></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Predefined processes</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Predefined processes</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/main/docs/src/processes.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="predefined_processes"><a class="docs-heading-anchor" href="#predefined_processes">Predefined processes</a><a id="predefined_processes-1"></a><a class="docs-heading-anchor-permalink" href="#predefined_processes" title="Permalink"></a></h1><p>Predefined processes are provided in this page. Those extracted by the literature cite their according resource. Note that by default all processes utilize the globally-exported <a href="../tutorial/#global_vars">predefined variables</a> of ConceptualClimateModels.jl.</p><h2 id="Temperature"><a class="docs-heading-anchor" href="#Temperature">Temperature</a><a id="Temperature-1"></a><a class="docs-heading-anchor-permalink" href="#Temperature" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.BasicRadiationBalance" href="#ConceptualClimateModels.BasicRadiationBalance"><code>ConceptualClimateModels.BasicRadiationBalance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BasicRadiationBalance(; T, f, ASR, OLR, c_T = 5e8)</code></pre><p>Create the equation</p><p class="math-container">\[c_T \frac{dT}{dt} = ASR - OLR + f\]</p><p>representing the most basic radiative energy balance at the top of the atmosphere setting a global mean temperature, see e.g., any introductory article (<a href="../references/#North1981">North <em>et al.</em>, 1981</a>; <a href="../references/#Ghil1981">Ghil, 1981</a>). <code>ASR</code> is the absorbed solar radiation, which defaults to <code>S*(1 - α)</code> in the <a href="#default_processes">default processes</a>. <code>S</code> is the received insolation, by default equal to <code>solar_constant</code>, but could e.g., be any astronomical forcing such as <a href="#ConceptualClimateModels.AstronomicalForcingDeSaedeleer"><code>AstronomicalForcingDeSaedeleer</code></a>. <code>α</code> is the albedo and <code>f</code> any additional forcing such as <a href="#ConceptualClimateModels.CO2Forcing"><code>CO2Forcing</code></a>. <code>OLR</code> defaults to <code>A + B*T</code>. <code>c_T</code> is the heat capacity of the system in J/K/m². However, for convenience, the parameter added to the final equation is <code>τ_T</code> which is the timescale in seconds, i.e., <code>c_T/solar_constant</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/temperature/gmt.jl#L9-L28">source</a></section></article><h2 id="Temperature-difference"><a class="docs-heading-anchor" href="#Temperature-difference">Temperature difference</a><a id="Temperature-difference-1"></a><a class="docs-heading-anchor-permalink" href="#Temperature-difference" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.ΔTLinearRelaxation" href="#ConceptualClimateModels.ΔTLinearRelaxation"><code>ConceptualClimateModels.ΔTLinearRelaxation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">ΔTLinearRelaxation(; ΔT, T, τ = 5e6, A = 36.53, B = 0.658)</code></pre><p>Create the equation</p><p class="math-container">\[\tau_{\Delta T}\frac{\Delta T}{dt} = \Delta T_{ref}(T) - \Delta T\]</p><p>which exponentially relaxes the equator-to-pole temperature difference <code>ΔT</code> to its reference value <span>$\Delta T_{ref}(T) = A - B*(T - 275.15)$</span>, i.e., it decreases linearly with global mean temperature <span>$T$</span> (in Kelvin). The default values for <code>A, B</code> are obtained from Equation (2) of (<a href="../references/#Gaskell2022">Gaskell <em>et al.</em>, 2022</a>). We also fitted paleoclimate data of (<a href="../references/#Osman2021">Osman <em>et al.</em>, 2021</a>) and found very similar results, <code>A = 35.8, B = -1.11</code> for north hemisphere and <code>A = 27.4, b = -0.513</code> for south.</p><p>Here <code>ΔT</code> is defined as the temperature difference between average temperatures at (0, 30) and (60, 90) latitudes. The timescale is taken as 2 months, although if <code>τ = 0</code> is given, the equation <span>$\Delta T ~ \Delta T_{ref}(T)$</span> is created instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/temperature/tempdiff.jl#L11-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.ΔTStommelModel" href="#ConceptualClimateModels.ΔTStommelModel"><code>ConceptualClimateModels.ΔTStommelModel</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">ΔTStommelModel(; ΔT=ΔT, ΔS=ΔS, η1 = 2, η2 = 1, η3 = 0.3)</code></pre><p>Create the equations</p><p class="math-container">\[\dot{\Delta T} = \eta_1 - \Delta T - |\Delta T - \Delta S| \Delta T
\dot{\Delta S} = \eta_2 - \eta_3\Delta S - |\Delta T - \Delta S| \Delta S\]</p><p>which are the two equations of the Stommel box model for Atlantic thermohaline circulation (<a href="../references/#Stommel1961">Stommel, 1961</a>), here presented in nondimensionalized form (<a href="../references/#Lohmann2021">Lohmann <em>et al.</em>, 2021</a>), so that temperature and sality are normalized by their coefficients <span>$a_T, a_S$</span> relating them to the density of water</p><p class="math-container">\[\rho = \rho_0 [1 - a_T(T - T_0) + a_S(S-S_0)]\]</p><p>for some reference values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/temperature/tempdiff.jl#L35-L51">source</a></section></article><h2 id="Longwave-radiation"><a class="docs-heading-anchor" href="#Longwave-radiation">Longwave radiation</a><a id="Longwave-radiation-1"></a><a class="docs-heading-anchor-permalink" href="#Longwave-radiation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.LinearOLR" href="#ConceptualClimateModels.LinearOLR"><code>ConceptualClimateModels.LinearOLR</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">LinearOLR(; OLR, T, A = -277.0, B = 1.8)</code></pre><p>Create the equation <code>OLR ~ A + B*T</code>. This is a linearized outgoing longwave radiation (OLR), and is the same equation as (7) of (<a href="../references/#North1981">North <em>et al.</em>, 1981</a>): <span>$OLR = A + BT$</span> with <span>$T$</span> temperature in Kelvin and <span>$A, B$</span> constants. However, default <span>$A, B$</span> are fitted from current CERES all sky OLR and using ERA5 data for the 2-meter temperature. We assume <code>T</code> in Kelvin. This linear approximation is quite accurate for temporally averaged data <span>$T \in (220, 280)$</span> however drops drastically in accuracy after that due to the nonlinear effects of clouds (as evident by observational data).</p><p>(<a href="../references/#Koll2018">Koll and Cronin, 2018</a>) provide a &quot;proof&quot; of the linearity of the clear sky OLR due to spectral properties of water vapor.</p><p>We note a big difference between current CERES data and the values reported in (<a href="../references/#North1981">North <em>et al.</em>, 1981</a>): here <code>A=214.67</code> (assuming <span>$T$</span> in Celcius) and <code>B=1.8</code> versus the values <code>A=203.3</code> and <code>B=2.09</code> in (<a href="../references/#North1981">North <em>et al.</em>, 1981</a>).</p><p>If instead of all sky, if we fit the clear sky CERES data, we get <code>A = -326.0, B = 2.09</code>. Interestingly, coefficient <code>B</code> here is the same as that reported by (<a href="../references/#North1981">North <em>et al.</em>, 1981</a>), but <code>A=244.88</code> (assuming <code>T</code> in Celcius) is not.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/longwave/olr.jl#L16-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.LinearClearSkyOLR" href="#ConceptualClimateModels.LinearClearSkyOLR"><code>ConceptualClimateModels.LinearClearSkyOLR</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">LinearClearSkyOLR(; kw...)</code></pre><p>Equivalent with <code>LinearOLR(; A = A = -326.0, B = 2.09, kw...)</code> and provided as a convenience for the clear sky fit to CERES data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/longwave/olr.jl#L45-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.EmissivityStefanBoltzmanOLR" href="#ConceptualClimateModels.EmissivityStefanBoltzmanOLR"><code>ConceptualClimateModels.EmissivityStefanBoltzmanOLR</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EmissivityStefanBoltzmanOLR(; ε, T)</code></pre><p>Create the equation <code>OLR ~ ε*σ*T^4</code> where <code>σ</code> is the Stefan Boltzmann constant and <code>ε</code> the effective emissivity, also known as the &quot;grayness&quot; of the system, or the deviation it has from being a perfect black body (<a href="../references/#Ghil1981">Ghil, 1981</a>). <code>ε</code> then needs to be parameterized itself to include greenhouse or other climate effects.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/longwave/olr.jl#L4-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.EmissivityFeedbackTanh" href="#ConceptualClimateModels.EmissivityFeedbackTanh"><code>ConceptualClimateModels.EmissivityFeedbackTanh</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EmissivityFeedbackTanh(; ε, Τ, left = 0.5, right = 0.4, rate = 0.5, Tref = 288.0)</code></pre><p>Create an equation that assigns emissivity <code>ε</code> to hyperbolic tangent of temperature <code>T</code>. This is an ad-hoc feedback  that was used in (<a href="../references/#Bastiaansen2023">Bastiaansen <em>et al.</em>, 2023</a>), similar to <a href="#ConceptualClimateModels.EmissivitySellers1969"><code>EmissivitySellers1969</code></a>. In essence this is a <a href="#ConceptualClimateModels.TanhProcess"><code>TanhProcess</code></a> with the given keywords as parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/longwave/emissivity.jl#L4-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.EmissivitySellers1969" href="#ConceptualClimateModels.EmissivitySellers1969"><code>ConceptualClimateModels.EmissivitySellers1969</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">EmissivitySellers1969(; ε, T, m = 0.5)</code></pre><p>Create the equation <code>ε ~ 1 - m*tanh(19*T^6*1e-16)</code>, which was used originally in (<a href="../references/#Sellers1969">Sellers, 1969</a>) to represent the effect of &quot;water vapor, carbon dioxide, dust and clouds on terrestrial radiation&quot;.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/longwave/emissivity.jl#L40-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.SoedergrenClearSkyEmissivity" href="#ConceptualClimateModels.SoedergrenClearSkyEmissivity"><code>ConceptualClimateModels.SoedergrenClearSkyEmissivity</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">SoedergrenClearSkyEmissivity(; ε, T, CO2, RH = 0.8, H_H20 = 2.0)</code></pre><p>Create Eq. 10 of (<a href="../references/#Soedergren2018">Södergren <em>et al.</em>, 2018</a>), which is the same as Eq. 21 of (<a href="../references/#Barker1999">Barker and Ross, 1999</a>) for the effective emissivity of clear sky atmosphere:</p><p class="math-container">\[\varepsilon = 1 - \exp(0.082 - (2.38*0.1*e_s*RH*H_{H2O} + 40.3*CO2*1e-6)^{0.294})\]</p><p>with <span>$e_s$</span> the <a href="#ConceptualClimateModels.saturation_vapor_pressure"><code>saturation_vapor_pressure</code></a>. The equation assumes CO2 concentration is in ppm and vapor pressure in kPa hence the conversion factors 0.1 and 1e-6.</p><div class="admonition is-category-warn"><header class="admonition-header">Physically wrong equation</header><div class="admonition-body"><p>Be advised: this process is included for reference only. It should not be used because it is physically wrong. Emissivity increases with temperature, while it should decrease: higher temperature → stronger greenhouse effect → smaller effective emissivity required for higher temperature to have the same OLR as per the basic equation <span>$OLR = ε σ Τ^4$</span>.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/longwave/emissivity.jl#L16-L34">source</a></section></article><h2 id="Shortwave-radiation"><a class="docs-heading-anchor" href="#Shortwave-radiation">Shortwave radiation</a><a id="Shortwave-radiation-1"></a><a class="docs-heading-anchor-permalink" href="#Shortwave-radiation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.DirectAlbedoAddition" href="#ConceptualClimateModels.DirectAlbedoAddition"><code>ConceptualClimateModels.DirectAlbedoAddition</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">DirectAlbedoAddition(; α, α_bg = 0.1, other_albedo_variables = (α_ice, α_clouds))</code></pre><p>Create the equation <code>α ~ α_bg + other_albedo_variables...</code>, meaning that planetary albedo <code>α</code> is a direct sum of all specified albedos.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/albedo.jl#L7-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CoAlbedoProduct" href="#ConceptualClimateModels.CoAlbedoProduct"><code>ConceptualClimateModels.CoAlbedoProduct</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CoAlbedoProduct(; α, albedo_variables = (α_ice, α_cloud))</code></pre><p>Create the equation <code>1 - α ~ prod(a -&gt; (1 - a), albedo_variables)</code> meaning that the co-albedo is the product of the co-albedos of all albedo variables. This would be e.g., the planetary albedo if all components were uniform layers, while the bottom-most layer (surface) had perfect absorption and all other layers had 0 absorption and finite reflection.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/albedo.jl#L24-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.SeparatedClearAllSkyAlbedo" href="#ConceptualClimateModels.SeparatedClearAllSkyAlbedo"><code>ConceptualClimateModels.SeparatedClearAllSkyAlbedo</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">SeparatedClearAllSkyAlbedo(; α, α_cloud, C, α_clr = 0.15)</code></pre><p>Create the equation <code>α ~ α_cloud*C + α_clr*(1 - C)</code>.</p><p>(<a href="../references/#Bender2017">Bender <em>et al.</em>, 2017</a>) argue that one can assume a separation between clear-sky and cloud albedo, so that <code>α = α_cloud*C + α_clr*(1 - C)</code> with <code>C</code> the cloud fraction and <code>α_clr</code> the clear sky albedo. They further cite (<a href="../references/#Cess1976">Cess, 1976</a>) to facilitate the claim Additionally, Eq. (20) of (<a href="../references/#Barker1999">Barker and Ross, 1999</a>) provides an identical expression.</p><p>In most cases you want to provide a variable with its own process for <code>α_clr</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/albedo.jl#L42-L53">source</a></section></article><h2 id="Ice/snow"><a class="docs-heading-anchor" href="#Ice/snow">Ice/snow</a><a id="Ice/snow-1"></a><a class="docs-heading-anchor-permalink" href="#Ice/snow" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.IceAlbedoFeedback" href="#ConceptualClimateModels.IceAlbedoFeedback"><code>ConceptualClimateModels.IceAlbedoFeedback</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IceAlbedoFeedback(; T, α_ice,
    max = 0.45, min = 0.1, Tscale = 10, Tfreeze = 275.15, τ = 0
)</code></pre><p>Create an equation that assigns ice albedo <code>α_ice</code> to a hyperbolic tangent of temperature <code>T</code>. This represents an approximately linear decrease with <code>T</code>, as ice melts over part of the earth, while it is constant for all <code>T</code> for which the earth would be either entirely ice covered (<code>T &lt; Tfreeze - scale</code>) or ice free (<code>T &gt; Tfreeze</code>).</p><p>In essence this is a <a href="#ConceptualClimateModels.TanhProcess"><code>TanhProcess</code></a> with the given keywords as parameters with reference temperature <code>Tref = Tfreeze - scale/2</code>.</p><p>This albedo is the most common used large-scale feedback in energy balance models, e.g., (<a href="../references/#Ghil1981">Ghil, 1981</a>), although it is typically taken as a piece-wise linear function. There is little change with using a hyperbolic tangent instead, while the <code>tanh</code> offers a differentiable flow.</p><p>The timescale <code>τ</code> if not zero will make an <a href="#ProcessBasedModelling.ExpRelaxation"><code>ExpRelaxation</code></a> process relaxing to the hyperbolic tangent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/ice.jl#L6-L26">source</a></section></article><h2 id="Water-vapor"><a class="docs-heading-anchor" href="#Water-vapor">Water vapor</a><a id="Water-vapor-1"></a><a class="docs-heading-anchor-permalink" href="#Water-vapor" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.saturation_vapor_pressure" href="#ConceptualClimateModels.saturation_vapor_pressure"><code>ConceptualClimateModels.saturation_vapor_pressure</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">saturation_vapor_pressure(T)</code></pre><p>Given surface temperature (in K) return saturation pressure for water vapor (in kPa) using the Tetens-Murray formula from (<a href="../references/#TetensEquation2023">Wikipedia contributors, 2023</a>), which is <code>A*exp(B*T/(C+T))</code>. Different formula is used for when <code>T</code> is less than the freezing point.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/water_vapor.jl#L35-L41">source</a></section></article><h2 id="Insolation"><a class="docs-heading-anchor" href="#Insolation">Insolation</a><a id="Insolation-1"></a><a class="docs-heading-anchor-permalink" href="#Insolation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.AstronomicalForcingDeSaedeleer" href="#ConceptualClimateModels.AstronomicalForcingDeSaedeleer"><code>ConceptualClimateModels.AstronomicalForcingDeSaedeleer</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">AstronomicalForcingDeSaedeleer(; S = S, extensive = false)</code></pre><p>Create the equation <code>S ~ astronomical_forcing_desaedeleer(t, extensive)</code> which is Eq. (1) of (<a href="../references/#DeSaedeleer2013">de Saedeleer <em>et al.</em>, 2013</a>):</p><pre><code class="language- hljs">S = \sum_i s_i \sin(\omega_i t) + c_i \cos(\omega_i t)</code></pre><p>where the values of <span>$\omega_i, s_i, c_i$</span> come from (<a href="../references/#Berger1978">Berger, 1978</a>) who performed a spectral expansion of the insolation. The validity range of this approximation is [-1, 0] Myr.</p><p>In the summation <span>$i$</span> goes up to 35 if <code>extensive</code>, otherwise up to 8. The components are sorted according to magnitude of the spectral line, so the default version has only the 8 most important spectra lines.</p><p>Note that in contrast to Eq. (1) of (<a href="../references/#DeSaedeleer2013">de Saedeleer <em>et al.</em>, 2013</a>) we do not normalize <span>$f$</span> and its value is in W/m² (the mean value is still deducted). Additionally, the values of <span>$\omega_i$</span> have been adjusted to expect time in units of seconds.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/insolation.jl#L3-L24">source</a></section></article><h2 id="Forcings"><a class="docs-heading-anchor" href="#Forcings">Forcings</a><a id="Forcings-1"></a><a class="docs-heading-anchor-permalink" href="#Forcings" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CO2Forcing" href="#ConceptualClimateModels.CO2Forcing"><code>ConceptualClimateModels.CO2Forcing</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CO2Forcing(; f, CO2, CO2f = 3.7)</code></pre><p>Create the equation <span>$f ~ CO2f \log_2(CO2/400)$</span> which describes the forcing added to the TOA energy balance due to CO2 concentrations, assumming the <code>OLR</code> expression is calibrated for 0 added forcing at 400 ppm which is the default for OLR expressions provided by ConceptualClimateModels.jl.</p><p>The default value of <span>$f$</span> comes from Eq. (3.2) of (<a href="../references/#Bastiaansen2023">Bastiaansen <em>et al.</em>, 2023</a>) which cites IPCC-5, while (<a href="../references/#Etminan2016">Etminan <em>et al.</em>, 2016</a>) report practically the same value assuming a constant <span>$f$</span> (note here the log is base 2). In reality <span>$f$</span> depends on <span>$CO2$</span> and other greenhouse gases concentrations due to spectral overlaps, see (<a href="../references/#Etminan2016">Etminan <em>et al.</em>, 2016</a>) Sec. 4.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/forcing.jl#L3-L15">source</a></section></article><h2 id="Clouds"><a class="docs-heading-anchor" href="#Clouds">Clouds</a><a id="Clouds-1"></a><a class="docs-heading-anchor-permalink" href="#Clouds" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudAlbedoExponential" href="#ConceptualClimateModels.CloudAlbedoExponential"><code>ConceptualClimateModels.CloudAlbedoExponential</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">CloudAlbedoExponential(
    α_cloud, C, a = 2.499219232848238, b = 17.596369331717433
)</code></pre><p>Create the equation <code>α_cloud ~ sinh(a*C)/b</code> relating cloud albedo to cloud fraction <code>C</code>. This equation is exponential and not linear, as in observations. (<a href="../references/#Engstrom2015">Engström <em>et al.</em>, 2015</a>) (and also (<a href="../references/#Bender2017">Bender <em>et al.</em>, 2017</a>)) discuss this exponential relation in detail, and provide as explanation that cloud effective albedo increases with latitude (due to solar zenith changes) while cloud fraction also increases with latitude.</p><p>Note that here however we modify the equation <code>α_cloud ~ exp(a*C - b)</code> of (<a href="../references/#Engstrom2015">Engström <em>et al.</em>, 2015</a>) to utilize the hyperbolic sine, so that <code>α_cloud = 0</code> when <code>C = 0</code> as is physically necessary. Then, <code>a, b</code> are extracted by fitting CERES data, using as <code>α_cloud</code> the energetically consistent cloud albedo as defined by (<a href="../references/#Datseris2021">Datseris and Stevens, 2021</a>), further yearly averaged and within latitudes (-60, 60) as in (<a href="../references/#Bender2017">Bender <em>et al.</em>, 2017</a>). This albedo can be directly added to the clear sky albedo to produce the planetary albedo.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/clouds/albedo.jl#L3-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.CloudAlbedoLinear" href="#ConceptualClimateModels.CloudAlbedoLinear"><code>ConceptualClimateModels.CloudAlbedoLinear</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">CloudAlbedoLinear(; α_cloud, C, a = 0.2252861764703435)</code></pre><p>Same as in <a href="#ConceptualClimateModels.CloudAlbedoExponential"><code>CloudAlbedoExponential</code></a>, but now the linear form <code>α_cloud ~ a*C</code> is returned, with <code>a</code> fitted from CERES data in the same way.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/clouds/albedo.jl#L27-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.BudykoOLR" href="#ConceptualClimateModels.BudykoOLR"><code>ConceptualClimateModels.BudykoOLR</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">BudykoOLR(; OLR=OLR, T=T, C=C,
    BudykoOLR_A = -461.8068, BudykoOLR_B = 2.58978,
    BudykoOLR_Ac = -377.22741, BudykoOLR_Bc = 1.536171
)</code></pre><p>Create the equation <code>OLR ~ A + B*T - C*(Ac + Bc*T)</code> for the dependence of OLR on both temperature and cloud fraction (in 0-1). This is the same as Eq. (1) of (<a href="../references/#Budyko1969">Budyko, 1969</a>). However, here <code>T</code> is expected in Kelvin, and the coefficients have been extracted by fitting into CERES data in the same way as in <a href="#ConceptualClimateModels.LinearOLR"><code>LinearOLR</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes/clouds/longwave.jl#L3-L14">source</a></section></article><h2 id="generic_processes"><a class="docs-heading-anchor" href="#generic_processes">Generic processes</a><a id="generic_processes-1"></a><a class="docs-heading-anchor-permalink" href="#generic_processes" title="Permalink"></a></h2><p>Processes that do not depend on any particular physical concept and instead provide a simple way to create new processes for a given climate variable:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ProcessBasedModelling.ParameterProcess" href="#ProcessBasedModelling.ParameterProcess"><code>ProcessBasedModelling.ParameterProcess</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ParameterProcess(variable, value = default_value(variable)) &lt;: Process</code></pre><p>The simplest process which equates a given <code>variable</code> to a constant value that is encapsulated in a parameter. If <code>value isa Real</code>, then a named parameter with the name of <code>variable</code> and <code>_0</code> appended is created. Else, if <code>valua isa Num</code> then it is taken as the paremeter directly.</p><p>Example:</p><pre><code class="language-julia hljs">@variables T(t) = 0.5
proc = ParameterProcess(T)</code></pre><p>will create the equation <code>T ~ T_0</code>, where <code>T_0</code> is a <code>@parameter</code> with default value <code>0.5</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ProcessBasedModelling.jl/blob/v1.0.4/src/processes_basic.jl#L1-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ProcessBasedModelling.TimeDerivative" href="#ProcessBasedModelling.TimeDerivative"><code>ProcessBasedModelling.TimeDerivative</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">TimeDerivative(variable, expression [, τ])</code></pre><p>The second simplest process that equates the time derivative of the <code>variable</code> to the given <code>expression</code> while providing some conveniences over manually constructing an <code>Equation</code>.</p><p>It creates the equation <code>τ_$(variable) Differential(t)(variable) ~ expression</code> by constructing a new <code>@parameter</code> with default value <code>τ</code> (if <code>τ</code> is already a <code>@parameter</code>, it is used as-is). If <code>τ</code> is not given, then 1 is used at its place and no parameter is created.</p><p>Note that if <code>iszero(τ)</code>, then the process <code>variable ~ expression</code> is created.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ProcessBasedModelling.jl/blob/v1.0.4/src/processes_basic.jl#L28-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ProcessBasedModelling.ExpRelaxation" href="#ProcessBasedModelling.ExpRelaxation"><code>ProcessBasedModelling.ExpRelaxation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ExpRelaxation(variable, expression [, τ]) &lt;: Process</code></pre><p>A common process for creating an exponential relaxation of <code>variable</code> towards the given <code>expression</code>, with timescale <code>τ</code>. It creates the equation:</p><pre><code class="nohighlight hljs">τn*Differential(t)(variable) ~ expression - variable</code></pre><p>Where <code>τn</code> is a new named <code>@parameter</code> with the value of <code>τ</code> and name <code>τ_($(variable))</code>. If instead <code>τ</code> is <code>nothing</code>, then 1 is used in its place (this is the default behavior). If <code>iszero(τ)</code>, then the equation <code>variable ~ expression</code> is created instead.</p><p>The convenience function</p><pre><code class="language-julia hljs">ExpRelaxation(process, τ)</code></pre><p>allows converting an existing process (or equation) into an exponential relaxation by using the <code>rhs(process)</code> as the <code>expression</code> in the equation above.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ProcessBasedModelling.jl/blob/v1.0.4/src/processes_basic.jl#L52-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ProcessBasedModelling.AdditionProcess" href="#ProcessBasedModelling.AdditionProcess"><code>ProcessBasedModelling.AdditionProcess</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AdditionProcess(process, added...)</code></pre><p>A convenience process for adding processes <code>added</code> to the <code>rhs</code> of the given <code>process</code>. <code>added</code> can be a single symbolic expression. Otherwise, <code>added</code> can be a <code>Process</code> or <code>Equation</code>, or multitude of them, in which case it is checked that the <code>lhs_variable</code> across all added components matches the <code>process</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ProcessBasedModelling.jl/blob/v1.0.4/src/processes_basic.jl#L93-L100">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ConceptualClimateModels.TanhProcess" href="#ConceptualClimateModels.TanhProcess"><code>ConceptualClimateModels.TanhProcess</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">TanhProcess(variable, driver, left, right, scale, reference) &lt;: Process
TanhProcess(variable, driver; left, right, scale, reference) &lt;: Process</code></pre><p>A common process for when a <code>variable</code> has a tanh-dependence on a <code>driver</code> variable. The rest of the input arguments should be real numbers or <code>@parameter</code> named parameters.</p><p>The process creates the expression:</p><pre><code class="nohighlight hljs">variable ~ left + (right - left)*(1 + tanh(2(driver - reference)/scale))*0.5</code></pre><p>i.e., a tanh formula that goes from value <code>left</code> to value <code>right</code> as a function of <code>driver</code> over a range of <code>scale</code> being centered at <code>reference</code>.</p><p>If the values given to the parameters of the expression are real numbers, they become named parameters prefixed with the name of <code>variable</code>, then the name of the <code>driver</code>, and then <code>_tanh_left</code>, <code>_tanh_right</code>, <code>_tanh_rate</code> and <code>_tanh_ref</code> respectively. Use <code>LiteralParameter</code> for parameters you do not wish to rename.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/ConceptualClimateModels.jl/blob/21873dd7bc561bb577b63622cab1428308a566ba/src/processes_advanced.jl#L5-L23">source</a></section></article><h2 id="default_processes"><a class="docs-heading-anchor" href="#default_processes">Default processes</a><a id="default_processes-1"></a><a class="docs-heading-anchor-permalink" href="#default_processes" title="Permalink"></a></h2><p>The list of default processes that are used by default in <a href="../tutorial/#ConceptualClimateModels.processes_to_coupledodes"><code>processes_to_coupledodes</code></a> if one does not explicitly provide a list of default processes are:</p><pre class="documenter-example-output"><code class="nohighlight hljs ansi"># note; all variables that do not have a process here
# become parameters via `ParameterProcess` by default.
DEFAULT_CCM_PROCESSES = [
    BasicRadiationBalance(),
    # shortwave
    ASR ~ S*(1 - α)*solar_constant,
    IceAlbedoFeedback(),
    DirectAlbedoAddition(), # Albedo uses fact that cloud albedo is defined as additive
    S ~ 1, # don&#39;t make insolation a parameter by default
    # longwave
    BudykoOLR(),
    CO2Forcing(), # for default CO2 values this is zero forcing
    ParameterProcess(CO2),
    AbsoluteHumidityIGLCRH(),
    # misc
    C ~ default_value(C),
    ΔTLinearRelaxation(),
]
</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial/">« Tutorial</a><a class="docs-footer-nextpage" href="../examples/">Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Sunday 17 March 2024 12:02">Sunday 17 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
